# ルール更新ガイドライン

## 基本原則

### ルールの性質
- **一般的な実装原則のみを記載する**
- プロジェクト固有の詳細や具体的な実装状況は含めない
- 再利用可能で普遍的なルールとして整理する

### 記載すべき内容
- 設計パターンと考え方
- ベストプラクティス
- よくある落とし穴と回避方法
- 品質を保つための原則

### 記載すべきでない内容
- 「〇〇を実装しました」等の完了報告
- 実装履歴や変更履歴
- 日付や完了状況の記録
- プロジェクト固有の具体的なコンポーネント名やファイルパス
- 特定のスキーマやデータ構造の詳細

## ルール更新タイミング

### 追加すべき時
1. 新しい設計パターンを確立した時
2. 再現性のあるエラー回避策を発見した時
3. 品質向上につながる原則を見出した時
4. チーム全体で共有すべきベストプラクティスを確立した時

### 見直すべき時
1. ルールが実態と乖離している時
2. より良い方法論が確立された時
3. プロジェクト固有の詳細が混入している時
4. 一般化できる原則が見えてきた時

## ルール文書の構成要件

### 基本構造
```markdown
# [カテゴリ]実装ルール

## 1. 基本方針
- 設計思想
- アプローチの考え方

## 2. [具体的トピック]
### パターン
- 推奨される実装パターン
- 一般的なコード例（抽象化）

### アンチパターン
- 避けるべき実装
- よくある間違い

## 3. 品質チェック
- 確認すべき項目
- 検証方法
```

### コード例の記載方法
- **抽象化された例**を使用
- プロジェクト固有の名前を避ける
- 一般的な命名規則で説明

```typescript
// ✅ 良い例：一般的な命名
interface Entity {
  id: string;
  userId: string;
  createdAt: Date;
}

// ❌ 悪い例：プロジェクト固有
interface UserProfile {
  userId: 'user1';
  level: 8;
  // ...
}
```

## ルールの種類と管理

### コアルール
- フロントエンド実装原則
- スタイリング・UIシステム
- 型システムとデータフロー

### 品質保証ルール
- テスト実装原則
- コード品質管理
- デバッグとトラブルシューティング

### 追加ルールの作成基準
1. **再利用性**: 他のプロジェクトでも適用可能か
2. **普遍性**: 時間が経っても有効な原則か
3. **明確性**: 誰が読んでも理解できるか
4. **実用性**: 実際の開発で役立つか

## 更新プロセス

### ステップ1: 評価
- 追加・修正する内容が一般原則か確認
- プロジェクト固有の詳細が含まれていないか確認

### ステップ2: 抽象化
- 具体的な実装から原則を抽出
- 一般的な命名に置き換え
- パターンとして再利用可能な形に整理

### ステップ3: 文書化
- 明確な見出しと構造
- コード例は抽象化されたもの
- DO/DON'Tを明確に

### ステップ4: 検証
- 他のプロジェクトでも適用可能か
- 実装履歴が含まれていないか
- 普遍的な原則として成立しているか

## 禁止事項

### 記載してはいけない内容
- ❌ 「〇〇機能を実装しました」
- ❌ 「2024年1月に追加」
- ❌ 「現在は未実装」「今後実装予定」
- ❌ 具体的なファイルパスやコンポーネント名の羅列
- ❌ プロジェクト固有のMockデータ構造

### 避けるべき表現
- ❌ 「このプロジェクトでは〜」
- ❌ 「〇〇ページで使用している〜」
- ✅ 「一般的に〜」「推奨されるパターンは〜」

## 例：良いルールと悪いルール

### ❌ 悪い例（プロジェクト固有）
```markdown
## ユーザープロフィール型定義
- UserProfileはsrc/types/gamification.tsで定義
- levelは1-100の数値
- mockUserProfileはsrc/mocks/data/user-profiles.tsに配置
```

### ✅ 良い例（一般原則）
```markdown
## 型定義の管理
- 型は単一の信頼できるソースから生成する
- データベーススキーマから型を推論する
- 手動での型定義の重複を避ける
```

## まとめ

### ルール作成の心構え
1. **一般化**: 具体から抽象へ
2. **再利用性**: どこでも使える原則
3. **明確性**: 誰でも理解できる説明
4. **実用性**: 実際に役立つ内容

### 定期的な見直し
- ルールが実態と乖離していないか
- プロジェクト固有の詳細が混入していないか
- より良い一般原則に昇華できないか
